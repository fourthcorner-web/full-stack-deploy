{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{% static 'css/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/fontawesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/solid.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/brands.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/regular.css' %}">

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <link rel="icon" type="image/webp" sizes="32x32" href="{% static 'image/favicon-32x32.webp' %}">
    <link rel="icon" type="image/webp" sizes="16x16" href="{% static 'image/favicon-16x16.webp' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'image/apple-touch-icon.webp' %}">
    
    <title>FOURTH-CORNER-Blog</title>
</head>

<body>
    <div id="google_translate_wrapper">
        <div id="google_translate_element"></div>
    </div>

    <script type="text/javascript">
    function googleTranslateElementInit() {
    new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'ar,en,fr,es,de,it,zh-CN,hi,pt,ru',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false
    }, 'google_translate_element');
    }

    // THIS KILLS THE TOP BAR AUTOMATICALLY - Using MutationObserver for better performance
    (function() {
        var banner = document.querySelector(".goog-te-banner-frame");
        if(banner) {
            banner.style.display = 'none';
            document.body.style.top = '0px';
            return; // Exit early if banner already exists
        }
        
        // Use MutationObserver to watch for banner creation
        var observer = new MutationObserver(function(mutations) {
            var banner = document.querySelector(".goog-te-banner-frame");
            if(banner) {
                banner.style.display = 'none';
                document.body.style.top = '0px';
                observer.disconnect(); // Stop observing after success
            }
        });
        
        // Start observing the document body for changes
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
        
        // Fallback: Clear observer after 5 seconds to prevent memory leaks
        setTimeout(function() {
            observer.disconnect();
        }, 5000);
    })();
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <style>
        /* POSITION & TRANSPARENCY */
        #google_translate_wrapper {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999999 !important;
            background: transparent !important;
            pointer-events: auto !important;
        }

        /* DARK MODE BUTTON STYLE */
        .goog-te-gadget .goog-te-combo {
            background: rgba(10, 17, 40, 0.9) !important; /* Theme dark blue */
            color: #ffffff !important;
            border: 1px solid #f02d2d !important; /* Theme red border */
            padding: 8px !important;
            border-radius: 4px !important;
            cursor: pointer;
            outline: none;
            font-weight: bold;
        }

        /* THE HARD HIDER - Targets the bar in image_f567a9.webp */
        body { 
            top: 0 !important; 
            position: static !important; 
        }
        
        .goog-te-banner-frame, 
        .goog-te-banner, 
        .goog-te-balloon-frame,
        #goog-gt-tt,
        .goog-te-spawn-frame,
        .skiptranslate iframe {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }

        .goog-te-gadget {
            color: transparent !important;
            font-size: 0 !important;
        }

        /* Hiding the tooltips on hover */
        .goog-tooltip, .goog-tooltip:hover {
            display: none !important;
        }

        /* MOBILE FIX */
        @media (max-width: 768px) {
            #google_translate_wrapper {
                bottom: 15px;
                right: 15px;
            }
        }
        .hero-banner {
        position: relative;
    }

    .banner-gradient {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        /* Fades from transparent at the top to a subtle red at the bottom */
        background: linear-gradient(
            to bottom, 
            rgba(5, 10, 24, 0) 0%, 
            rgba(240, 45, 45, 0.1) 50%, 
            rgba(240, 45, 45, 0.4) 100%
        );
        pointer-events: none; /* Allows clicks to pass through to the image if needed */
    }
    </style>
    <!-- Scripts -->
    <script src="{% static 'js/vendor/jquery.min.js' %}"></script>
    <script src="{% static 'js/animations.js' %}"></script>

    <!-- Header -->
    <div class="sticky-top bg-dark-color">
        <div class="r-container">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <div class="logo-container">
                        <a class="navbar-brand" href="{% url 'index' %}">
                            <img src="{% static 'image/Logo.webp' %}" alt="fourth-corner" class="img-fluid">
                        </a>
                    </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fa-solid fa-bars-staggered"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 gap-lg-4 gap-2 px-lg-0 px-4">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'index' %}">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'about' %}">About Us</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'service' %}">Services</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'project' %}">Projects</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="{% url 'blog_list' %}">Blog</a>
                            </li> 
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'career' %}">Career</a>
                            </li>                            
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="{% url 'contact' %}">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <!-- Main -->
    <main style="background-color: --selector-bg-color;">
        
        {% with post.sections.first as first_section %}
        {% if first_section.image %}
        <div class="hero-banner position-relative overflow-hidden" style="height: 60vh;">
            <img src="{{ first_section.image.url }}" alt="Banner" class="w-100 h-100" style="object-fit: cover;">
            
            <div class="banner-gradient"></div>
        </div>
        {% endif %}
        {% endwith %}

        <div class="container py-5 reveal-trigger">
            <div class="row g-5">
                <div class="col-lg-8">
                    <div class="mb-5 scroll-reveal">
                        <nav aria-label="breadcrumb" class="mb-2">
                            <p class="small text-uppercase fw-bold text-white-50">Home <span class="mx-2">»</span> Blog Details</p>
                        </nav>
                        <h1 class="display-4 fw-bolder text-uppercase text-white mb-3 scroll-reveal">{{ post.title }}</h1>
                        
                        <div class="d-flex gap-4 small text-danger fw-bold text-uppercase scroll-reveal">
                            <span><i class="fa-solid fa-user me-1"></i> {{ post.author.username|default:"ADMIN" }}</span>
                            <span><i class="fa-solid fa-calendar me-1"></i> {{ post.created_at|date:"M d, Y" }}</span>
                        </div>
                    </div>

                    {% for section in post.sections.all %}
                    <div class="mb-5 pb-4 reveal-trigger">
                        {% if not forloop.first and section.image %}
                            <img src="{{ section.image.url }}" class="w-100 rounded-1 mb-4 scroll-reveal" alt="Section Image" loading="lazy">
                        {% endif %}

                        {% if section.heading %}
                            <h2 class="h3 fw-bold text-uppercase mb-3 scroll-reveal" style="color: #f02d2d;">{{ section.heading }}</h2>
                        {% endif %}

                        <div class="fs-5 text-white-75 lh-lg scroll-reveal">
                            {{ section.text_content|linebreaks }}
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <div class="col-lg-4 reveal-trigger">
                    <aside class="sticky-top" style="top: 100px;">
                        <div class="p-4 scroll-reveal" style="background: #0b1630; border-top: 4px solid #f02d2d;">
                            <h5 class="fw-bold text-uppercase mb-4 text-white">
                                RECENT <span class="text-danger">POSTS</span>
                            </h5>
                            
                            {% for recent in recent_posts %}
                            <div class="d-flex align-items-start mb-4 pb-3 border-bottom border-secondary border-opacity-25 scroll-reveal">
                                <div class="flex-shrink-0 scroll-reveal">
                                    <img src="{{ recent.thumbnail.url }}" alt="{{ recent.title }}" style="width: 70px; height: 50px; object-fit: cover;">
                                </div>
                                <div class="flex-grow-1 ms-3 scroll-reveal">
                                    <span class="text-white-50 x-small">{{ recent.created_at|date:"M d, Y" }}</span>
                                    <h6 class="mt-1 ">
                                        <a href="{% url 'blog_detail' recent.slug %}" class="text-white text-decoration-none hover-red fw-bold small">
                                            {{ recent.title|truncatechars:40 }}
                                        </a>
                                    </h6>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white">
        <div class="section py-5 position-relative" style="background-color: #0a0e1a;">
            <div class="r-container position-relative" style="z-index: 2;">
                <div class="row row-cols-lg-4 row-cols-md-2 row-cols-1 g-5">
                    
                    <div class="col">
                        <div class="d-flex flex-column gap-3">
                            <img src="{% static 'image/Logo.webp' %}" alt="Fourth Corner Logo" class="img-fluid" width="200">
                            <p class="opacity-75 mt-2" style="font-size: 0.9rem; line-height: 1.8;">
                            Fourth Corner is an Iraqi company providing integrated engineering and industrial solutions, committed to quality, safety, and reliability across Iraq. 
                            </p>
                        </div>
                    </div>

                    <div class="col">
                        <h5 class="font-1 fw-bold mb-4 text-uppercase" style="letter-spacing: 1px;">Quick Links</h5>
                        <ul class="list-unstyled d-flex flex-column gap-2">
                            <li><a href="{% url 'about' %}" class="text-white text-decoration-none opacity-75-hover small"><i class="fa-solid fa-caret-right accent-color me-2"></i>About Us</a></li>
                            <li><a href="{% url 'service' %}" class="text-white text-decoration-none opacity-75-hover small"><i class="fa-solid fa-caret-right accent-color me-2"></i>Services</a></li>
                            <li><a href="{% url 'contact' %}" class="text-white text-decoration-none opacity-75-hover small"><i class="fa-solid fa-caret-right accent-color me-2"></i>Contact Us</a></li>
                        </ul>
                    </div>

                    <div class="col">
                        <h5 class="font-1 fw-bold mb-4 text-uppercase" style="letter-spacing: 1px;">Services</h5>
                        <ul class="list-unstyled d-flex flex-column gap-3">
                            <li>
                                <a href="{% url 'fire_industry' %}" class="text-white text-decoration-none opacity-75-hover d-flex align-items-start small" style="letter-spacing: 0.5px;">
                                    <i class="fa-solid fa-caret-right accent-color me-2 mt-1"></i>
                                    <span>FIRE & INDUSTRIAL SAFETY</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'electrical_systems' %}" class="text-white text-decoration-none opacity-75-hover d-flex align-items-start small" style="letter-spacing: 0.5px;">
                                    <i class="fa-solid fa-caret-right accent-color me-2 mt-1"></i>
                                    <span>ELECTRICAL & POWER SYSTEMS</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'construction' %}" class="text-white text-decoration-none opacity-75-hover d-flex align-items-start small" style="letter-spacing: 0.5px;">
                                    <i class="fa-solid fa-caret-right accent-color me-2 mt-1"></i>
                                    <span>ENGINEERING CONSTRUCTION</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="col">
                        <h5 class="font-1 fw-bold mb-4 text-uppercase" style="letter-spacing: 1px;">Get In Touch</h5>
                        <div class="d-flex flex-column gap-3">
                            <p class="opacity-75 mb-0 small"><i class="fa-solid fa-location-dot me-2 accent-color"></i>Second Floor, Fourth Corner, Basra, Iraq</p>
                            <p class="opacity-75 mb-0 small"><i class="fa-solid fa-phone me-2 accent-color"></i>+964 780227 5772</p>
                            <p class="opacity-75 mb-0 small"><i class="fa-solid fa-envelope me-2 accent-color"></i> info@fourth-corner.com</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="py-3 border-top border-secondary" style="background-color: #0a0e1a;">
            <div class="container text-center">
                <span class="opacity-50 small">
                    Copyright © 2025 **FOURTH-CORNER**. All Rights Reserved.
                </span>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/vendor/bootstrap.bundle.min.js' %}" defer></script>
    <script src="{% static 'js/script.js' %}" defer></script>
    <script src="{% static 'js/vendor/isotope.pkgd.min.js' %}" defer></script>
    <script src="{% static 'js/video_embedded.js' %}" defer></script>
    <script src="{% static 'js/vendor/fslightbox.js' %}" defer></script>
</body>

</html>
